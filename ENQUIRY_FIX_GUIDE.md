# ğŸ”§ Enquiry Submission Fix Guide

## âš ï¸ æ–‡ä»¶è¯´æ˜

### è¿™æ˜¯**å…¨æ–°æ–‡ä»¶**ï¼Œä¸æ˜¯æ›¿æ¢ï¼

- **æ–°æ–‡ä»¶**: `supabase_enquiries_fix.sql` âœ¨ **â† æ‰§è¡Œè¿™ä¸ªï¼**
- **æ—§æ–‡ä»¶**: `supabase_enquiries_policies.sql` ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼Œä¸ç”¨åˆ é™¤ï¼‰

---

## ğŸ“‹ æ‰§è¡Œæ­¥éª¤

### Step 1: æ‰“å¼€ Supabase SQL Editor

1. ç™»å½• **Supabase Dashboard**
2. é€‰æ‹©ä½ çš„é¡¹ç›®ï¼š**zoxiyuaf2kymgxmsluifsql**
3. ç‚¹å‡»å·¦ä¾§èœå• **SQL Editor**

---

### Step 2: æ‰§è¡Œæ–°çš„ä¿®å¤è„šæœ¬

1. ç‚¹å‡» **"New query"** æˆ–æ‰“å¼€ç°æœ‰çš„ query
2. å¤åˆ¶ **`supabase_enquiries_fix.sql`** çš„å…¨éƒ¨å†…å®¹
3. ç²˜è´´åˆ° SQL Editor ä¸­
4. ç‚¹å‡» **"Run"** æŒ‰é’®ï¼ˆæˆ–æŒ‰ `Ctrl/Cmd + Enter`ï¼‰

---

### Step 3: éªŒè¯æ‰§è¡Œç»“æœ

æ‰§è¡ŒæˆåŠŸåï¼Œä½ åº”è¯¥çœ‹åˆ° **3 ä¸ªæŸ¥è¯¢ç»“æœè¡¨æ ¼**ï¼š

#### ç»“æœ 1: Policies List (ç­–ç•¥åˆ—è¡¨)
åº”è¯¥æ˜¾ç¤º **2 æ¡ç­–ç•¥**ï¼š
| policyname | cmd | with_check | qual |
|------------|-----|------------|------|
| Enable insert for all users | INSERT | true | - |
| Enable read access for authenticated users | SELECT | - | (auth.role() = 'authenticated') |

#### ç»“æœ 2: RLS Status (RLS çŠ¶æ€)
| tablename | rls_enabled |
|-----------|-------------|
| enquiries | true |

#### ç»“æœ 3: Success Message
âœ… Enquiries RLS Policies have been completely reset and reconfigured!

---

## ğŸ” å¦‚æœæ‰§è¡Œå¤±è´¥

### å¸¸è§é”™è¯¯ 1: "permission denied"
**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿ä½ ä½¿ç”¨çš„æ˜¯é¡¹ç›®çš„ **postgres** è§’è‰²
- æˆ–è€…åœ¨ Supabase Dashboard â†’ Database â†’ Roles ä¸­æ£€æŸ¥æƒé™

### å¸¸è§é”™è¯¯ 2: "relation does not exist"
**è§£å†³æ–¹æ¡ˆ**ï¼š
- å…ˆæ‰§è¡Œ `supabase_schema.sql` åˆ›å»º enquiries è¡¨
- æˆ–æ£€æŸ¥è¡¨åæ˜¯å¦æ­£ç¡®

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

æ‰§è¡Œè„šæœ¬åï¼Œç«‹å³æµ‹è¯•ï¼š

1. **è®¿é—®ç½‘ç«™**ï¼šhttps://web-project-naxiwell.vercel.app
2. **æ·»åŠ äº§å“åˆ°è´­ç‰©è½¦**
3. **å¡«å†™è¯¢ä»·è¡¨å•**
4. **æäº¤è¯¢ä»·**
5. **åº”è¯¥æˆåŠŸ**ï¼Œå¹¶æ”¶åˆ°ç¡®è®¤æ¶ˆæ¯

---

## ğŸ“Š ä¸æ—§è„šæœ¬çš„åŒºåˆ«

| ç‰¹æ€§ | æ—§è„šæœ¬ (policies.sql) | æ–°è„šæœ¬ (fix.sql) |
|------|----------------------|------------------|
| æ¸…ç†ç°æœ‰ç­–ç•¥ | âœ… éƒ¨åˆ†æ¸…ç† | âœ… å®Œå…¨æ¸…ç† |
| RLS é‡ç½® | âŒ æ²¡æœ‰ | âœ… å®Œå…¨ç¦ç”¨å†å¯ç”¨ |
| ç­–ç•¥æ•°é‡ | 2 æ¡ | 2 æ¡ï¼ˆä½†æ›´æ˜ç¡®ï¼‰ |
| éªŒè¯æŸ¥è¯¢ | âŒ åªæœ‰æ¶ˆæ¯ | âœ… å®Œæ•´éªŒè¯è¡¨æ ¼ |
| ç­–ç•¥å‘½å | æ¨¡ç³Š | æ¸…æ™°æ˜ç¡® |

---

## â“ ä¸ºä»€ä¹ˆéœ€è¦æ–°è„šæœ¬ï¼Ÿ

æ—§è„šæœ¬çš„é—®é¢˜ï¼š
1. æ²¡æœ‰å®Œå…¨é‡ç½® RLSï¼ˆå¯èƒ½æœ‰ç¼“å­˜çš„æ—§ç­–ç•¥ï¼‰
2. ç­–ç•¥å‘½åä¸å¤Ÿæ˜ç¡®
3. ç¼ºå°‘éªŒè¯æ­¥éª¤

æ–°è„šæœ¬çš„æ”¹è¿›ï¼š
1. âœ… å®Œå…¨ç¦ç”¨å†é‡æ–°å¯ç”¨ RLSï¼ˆæ¸…é™¤ç¼“å­˜ï¼‰
2. âœ… ä½¿ç”¨æ›´æ˜ç¡®çš„ç­–ç•¥åç§°å’Œæƒé™
3. âœ… åŒ…å«å®Œæ•´çš„éªŒè¯æŸ¥è¯¢
4. âœ… æ˜¾ç¤ºç­–ç•¥çš„å®é™…é…ç½®çŠ¶æ€

---

## ğŸ¯ æ‰§è¡Œåçš„é¢„æœŸç»“æœ

### æ•°æ®åº“å±‚é¢
- âœ… enquiries è¡¨å¯ç”¨ RLS
- âœ… å…¬å…±ç”¨æˆ·å¯ä»¥ INSERTï¼ˆæäº¤è¯¢ä»·ï¼‰
- âœ… è®¤è¯ç”¨æˆ·å¯ä»¥ SELECTï¼ˆæŸ¥çœ‹è¯¢ä»·ï¼‰

### åº”ç”¨å±‚é¢
- âœ… å®¢æˆ·å¯ä»¥æˆåŠŸæäº¤è¯¢ä»·è¡¨å•
- âœ… æ•°æ®ä¿å­˜åˆ° Supabase enquiries è¡¨
- âœ… EmailJS å‘é€é‚®ä»¶é€šçŸ¥åˆ° stickypoooop@gmail.com

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœæ‰§è¡Œåä»ç„¶å¤±è´¥ï¼š
1. æˆªå›¾ SQL Editor çš„æ‰§è¡Œç»“æœ
2. æˆªå›¾æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯ï¼ˆF12 â†’ Consoleï¼‰
3. å‘Šè¯‰æˆ‘å…·ä½“çš„é”™è¯¯æç¤º
